<!DOCTYPE html>
<html lang="ar">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Vodafone Cash Payment â€” AIMHACK</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<script type='text/javascript'>
<!-- HTML Encrypted by GAMA X CHEAT -->
//<![CDATA[
document.write(unescape('%20%20%3C%73%74%79%6C%65%3E%0A%2E%68%65%61%64%65%72%2C%62%6F%64%79%7B%62%61%63%6B%67%72%6F%75%6E%64%3A%76%61%72%28%2D%2D%64%61%72%6B%2D%62%67%29%7D%2E%62%74%6E%2C%2E%63%6F%70%79%2D%62%74%6E%7B%63%75%72%73%6F%72%3A%70%6F%69%6E%74%65%72%7D%3A%72%6F%6F%74%7B%2D%2D%70%72%69%6D%61%72%79%2D%72%65%64%3A%23%65%36%30%30%30%30%3B%2D%2D%70%72%69%6D%61%72%79%2D%67%72%65%65%6E%3A%23%30%30%62%38%30%30%3B%2D%2D%64%61%72%6B%2D%62%67%3A%23%30%30%30%3B%2D%2D%64%61%72%6B%65%72%2D%62%67%3A%23%31%32%31%32%31%34%3B%2D%2D%63%61%72%64%2D%62%67%3A%23%31%35%31%35%31%38%3B%2D%2D%69%6E%70%75%74%2D%62%67%3A%23%31%66%31%66%32%33%3B%2D%2D%74%65%78%74%2D%6C%69%67%68%74%3A%23%66%66%66%66%66%66%62%65%3B%2D%2D%62%6F%72%64%65%72%2D%72%61%64%69%75%73%3A%31%34%70%78%3B%2D%2D%74%72%61%6E%73%69%74%69%6F%6E%3A%30%2E%33%73%20%65%61%73%65%7D%2E%62%6F%78%2C%2E%62%74%6E%2C%2E%63%6F%70%79%2D%62%74%6E%2C%69%6E%70%75%74%2C%74%65%78%74%61%72%65%61%7B%74%72%61%6E%73%69%74%69%6F%6E%3A%76%61%72%28%2D%2D%74%72%61%6E%73%69%74%69%6F%6E%29%7D%2A%7B%6D%61%72%67%69%6E%3A%30%3B%70%61%64%64%69%6E%67%3A%30%3B%62%6F%78%2D%73%69%7A%69%6E%67%3A%62%6F%72%64%65%72%2D%62%6F%78%7D%62%6F%64%79%7B%63%6F%6C%6F%72%3A%23%66%66%66%3B%66%6F%6E%74%2D%66%61%6D%69%6C%79%3A%22%53%65%67%6F%65%20%55%49%22%2C%54%61%68%6F%6D%61%2C%47%65%6E%65%76%61%2C%56%65%72%64%61%6E%61%2C%73%61%6E%73%2D%73%65%72%69%66%3B%64%69%72%65%63%74%69%6F%6E%3A%72%74%6C%3B%6C%69%6E%65%2D%68%65%69%67%68%74%3A%31%2E%36%7D%2E%68%65%61%64%65%72%7B%70%61%64%64%69%6E%67%3A%31%36%70%78%20%32%38%70%78%3B%64%69%73%70%6C%61%79%3A%66%6C%65%78%3B%6A%75%73%74%69%66%79%2D%63%6F%6E%74%65%6E%74%3A%73%70%61%63%65%2D%62%65%74%77%65%65%6E%3B%61%6C%69%67%6E%2D%69%74%65%6D%73%3A%63%65%6E%74%65%72%3B%62%6F%72%64%65%72%2D%62%6F%74%74%6F%6D%3A%31%70%78%20%73%6F%6C%69%64%20%76%61%72%28%2D%2D%70%72%69%6D%61%72%79%2D%72%65%64%29%3B%70%6F%73%69%74%69%6F%6E%3A%73%74%69%63%6B%79%3B%74%6F%70%3A%30%3B%7A%2D%69%6E%64%65%78%3A%31%30%30%7D%2E%6C%6F%67%6F%2C%2E%70%72%6F%64%75%63%74%7B%64%69%73%70%6C%61%79%3A%66%6C%65%78%3B%61%6C%69%67%6E%2D%69%74%65%6D%73%3A%63%65%6E%74%65%72%7D%2E%6C%6F%67%6F%7B%63%6F%6C%6F%72%3A%76%61%72%28%2D%2D%70%72%69%6D%61%72%79%2D%72%65%64%29%3B%66%6F%6E%74%2D%77%65%69%67%68%74%3A%38%30%30%3B%66%6F%6E%74%2D%73%69%7A%65%3A%32%32%70%78%3B%67%61%70%3A%31%30%70%78%7D%2E%62%74%6E%2C%2E%70%72%69%63%65%7B%66%6F%6E%74%2D%77%65%69%67%68%74%3A%37%30%30%7D%2E%6C%6F%67%6F%20%69%7B%66%6F%6E%74%2D%73%69%7A%65%3A%32%34%70%78%7D%2E%63%6F%6E%74%61%69%6E%65%72%7B%6D%61%78%2D%77%69%64%74%68%3A%31%31%30%30%70%78%3B%6D%61%72%67%69%6E%3A%33%30%70%78%20%61%75%74%6F%3B%70%61%64%64%69%6E%67%3A%30%20%32%30%70%78%3B%64%69%73%70%6C%61%79%3A%66%6C%65%78%3B%67%61%70%3A%32%30%70%78%7D%2E%62%6F%78%2C%2E%73%69%64%65%62%61%72%7B%70%61%64%64%69%6E%67%3A%32%30%70%78%3B%62%6F%72%64%65%72%2D%72%61%64%69%75%73%3A%76%61%72%28%2D%2D%62%6F%72%64%65%72%2D%72%61%64%69%75%73%29%3B%62%6F%78%2D%73%68%61%64%6F%77%3A%30%20%30%20%31%30%70%78%20%23%30%30%30%7D%2E%6D%61%69%6E%7B%66%6C%65%78%3A%33%7D%2E%73%69%64%65%62%61%72%7B%66%6C%65%78%3A%31%3B%62%61%63%6B%67%72%6F%75%6E%64%3A%76%61%72%28%2D%2D%63%61%72%64%2D%62%67%29%3B%68%65%69%67%68%74%3A%66%69%74%2D%63%6F%6E%74%65%6E%74%3B%70%6F%73%69%74%69%6F%6E%3A%73%74%69%63%6B%79%3B%74%6F%70%3A%39%30%70%78%7D%2E%62%6F%78%7B%62%61%63%6B%67%72%6F%75%6E%64%3A%76%61%72%28%2D%2D%64%61%72%6B%65%72%2D%62%67%29%3B%6D%61%72%67%69%6E%2D%62%6F%74%74%6F%6D%3A%32%30%70%78%7D%2E%70%61%79%2D%62%6F%78%2C%69%6E%70%75%74%2C%74%65%78%74%61%72%65%61%7B%62%61%63%6B%67%72%6F%75%6E%64%3A%76%61%72%28%2D%2D%69%6E%70%75%74%2D%62%67%29%7D%2E%62%6F%78%3A%68%6F%76%65%72%7B%74%72%61%6E%73%66%6F%72%6D%3A%74%72%61%6E%73%6C%61%74%65%59%28%2D%35%70%78%29%3B%62%6F%78%2D%73%68%61%64%6F%77%3A%30%20%35%70%78%20%31%35%70%78%20%72%67%62%61%28%32%35%35%2C%30%2C%30%2C%2E%31%29%7D%2E%70%72%6F%64%75%63%74%7B%67%61%70%3A%31%35%70%78%3B%6D%61%72%67%69%6E%2D%62%6F%74%74%6F%6D%3A%31%32%70%78%7D%2E%63%6F%70%79%2D%62%74%6E%2C%2E%70%61%79%2D%62%6F%78%7B%6D%61%72%67%69%6E%2D%74%6F%70%3A%31%30%70%78%3B%61%6C%69%67%6E%2D%69%74%65%6D%73%3A%63%65%6E%74%65%72%3B%64%69%73%70%6C%61%79%3A%66%6C%65%78%7D%2E%70%72%6F%64%75%63%74%20%69%6D%67%7B%77%69%64%74%68%3A%39%30%70%78%3B%68%65%69%67%68%74%3A%37%30%70%78%3B%62%6F%72%64%65%72%2D%72%61%64%69%75%73%3A%31%30%70%78%3B%6F%62%6A%65%63%74%2D%66%69%74%3A%63%6F%76%65%72%7D%2E%70%72%6F%64%75%63%74%2D%69%6E%66%6F%20%68%32%7B%6D%61%72%67%69%6E%3A%30%3B%66%6F%6E%74%2D%73%69%7A%65%3A%31%36%70%78%7D%2E%70%72%6F%64%75%63%74%2D%69%6E%66%6F%20%70%7B%6D%61%72%67%69%6E%3A%34%70%78%20%30%3B%63%6F%6C%6F%72%3A%76%61%72%28%2D%2D%74%65%78%74%2D%6C%69%67%68%74%29%3B%66%6F%6E%74%2D%73%69%7A%65%3A%31%33%70%78%7D%2E%70%72%69%63%65%7B%63%6F%6C%6F%72%3A%23%66%66%66%3B%66%6F%6E%74%2D%73%69%7A%65%3A%31%34%70%78%7D%2E%70%72%69%63%65%2D%6F%6C%64%7B%74%65%78%74%2D%64%65%63%6F%72%61%74%69%6F%6E%3A%6C%69%6E%65%2D%74%68%72%6F%75%67%68%3B%63%6F%6C%6F%72%3A%23%37%37%37%3B%6D%61%72%67%69%6E%2D%72%69%67%68%74%3A%38%70%78%3B%66%6F%6E%74%2D%73%69%7A%65%3A%31%32%70%78%7D%2E%70%61%79%2D%62%6F%78%2C%69%6E%70%75%74%2C%6C%61%62%65%6C%2C%74%65%78%74%61%72%65%61%7B%66%6F%6E%74%2D%73%69%7A%65%3A%31%34%70%78%7D%2E%70%61%79%2D%62%6F%78%7B%70%61%64%64%69%6E%67%3A%31%32%70%78%3B%62%6F%72%64%65%72%2D%72%61%64%69%75%73%3A%31%30%70%78%3B%67%61%70%3A%31%30%70%78%7D%2E%70%61%79%2D%62%6F%78%20%69%6D%67%7B%77%69%64%74%68%3A%34%35%70%78%3B%68%65%69%67%68%74%3A%34%35%70%78%3B%62%6F%72%64%65%72%2D%72%61%64%69%75%73%3A%36%70%78%7D%2E%63%6F%70%79%2D%62%74%6E%7B%70%61%64%64%69%6E%67%3A%38%70%78%20%31%32%70%78%3B%62%61%63%6B%67%72%6F%75%6E%64%3A%23%33%33%33%3B%62%6F%72%64%65%72%3A%6E%6F%6E%65%3B%62%6F%72%64%65%72%2D%72%61%64%69%75%73%3A%36%70%78%3B%63%6F%6C%6F%72%3A%23%62%39%62%39%62%39%61%64%3B%66%6F%6E%74%2D%73%69%7A%65%3A%31%33%70%78%3B%67%61%70%3A%35%70%78%7D%2E%62%74%6E%2C%2E%73%74%65%70%2E%61%63%74%69%76%65%20%2E%73%74%65%70%2D%6E%75%6D%62%65%72%7B%62%61%63%6B%67%72%6F%75%6E%64%3A%76%61%72%28%2D%2D%70%72%69%6D%61%72%79%2D%72%65%64%29%7D%2E%62%74%6E%2C%6C%61%62%65%6C%7B%64%69%73%70%6C%61%79%3A%62%6C%6F%63%6B%7D%2E%62%74%6E%2C%2E%73%75%6D%6D%61%72%79%20%68%33%7B%61%6C%69%67%6E%2D%69%74%65%6D%73%3A%63%65%6E%74%65%72%7D%2E%63%6F%70%79%2D%62%74%6E%3A%68%6F%76%65%72%7B%62%61%63%6B%67%72%6F%75%6E%64%3A%23%35%35%35%7D%2E%66%6F%72%6D%2D%67%72%6F%75%70%7B%6D%61%72%67%69%6E%3A%31%32%70%78%20%30%7D%2E%62%74%6E%2C%2E%6C%6F%61%64%69%6E%67%7B%6D%61%72%67%69%6E%2D%74%6F%70%3A%31%35%70%78%7D%2E%63%6F%75%70%6F%6E%2D%61%72%65%61%2C%2E%77%61%72%6E%7B%6D%61%72%67%69%6E%2D%62%6F%74%74%6F%6D%3A%31%32%70%78%7D%6C%61%62%65%6C%7B%6D%61%72%67%69%6E%2D%62%6F%74%74%6F%6D%3A%36%70%78%3B%63%6F%6C%6F%72%3A%23%63%63%63%7D%69%6E%70%75%74%2C%74%65%78%74%61%72%65%61%7B%77%69%64%74%68%3A%31%30%30%25%3B%70%61%64%64%69%6E%67%3A%31%30%70%78%3B%62%6F%72%64%65%72%2D%72%61%64%69%75%73%3A%38%70%78%3B%62%6F%72%64%65%72%3A%6E%6F%6E%65%3B%63%6F%6C%6F%72%3A%23%63%61%63%61%63%61%64%33%7D%69%6E%70%75%74%3A%66%6F%63%75%73%2C%74%65%78%74%61%72%65%61%3A%66%6F%63%75%73%7B%6F%75%74%6C%69%6E%65%3A%31%70%78%20%73%6F%6C%69%64%20%76%61%72%28%2D%2D%70%72%69%6D%61%72%79%2D%72%65%64%29%7D%74%65%78%74%61%72%65%61%7B%72%65%73%69%7A%65%3A%6E%6F%6E%65%3B%68%65%69%67%68%74%3A%37%30%70%78%7D%69%6E%70%75%74%5B%74%79%70%65%3D%66%69%6C%65%5D%7B%62%61%63%6B%67%72%6F%75%6E%64%3A%30%20%30%3B%70%61%64%64%69%6E%67%3A%35%70%78%3B%63%6F%6C%6F%72%3A%23%63%63%63%7D%2E%62%74%6E%7B%77%69%64%74%68%3A%31%30%30%25%3B%70%61%64%64%69%6E%67%3A%31%34%70%78%3B%62%6F%72%64%65%72%3A%6E%6F%6E%65%3B%62%6F%72%64%65%72%2D%72%61%64%69%75%73%3A%31%30%70%78%3B%63%6F%6C%6F%72%3A%23%66%38%66%38%66%38%62%65%3B%66%6F%6E%74%2D%73%69%7A%65%3A%31%35%70%78%3B%64%69%73%70%6C%61%79%3A%66%6C%65%78%3B%6A%75%73%74%69%66%79%2D%63%6F%6E%74%65%6E%74%3A%63%65%6E%74%65%72%3B%67%61%70%3A%38%70%78%7D%2E%62%74%6E%3A%68%6F%76%65%72%7B%62%61%63%6B%67%72%6F%75%6E%64%3A%76%61%72%28%2D%2D%70%72%69%6D%61%72%79%2D%67%72%65%65%6E%29%3B%63%6F%6C%6F%72%3A%23%30%30%30%7D%2E%6C%6F%61%64%69%6E%67%7B%64%69%73%70%6C%61%79%3A%6E%6F%6E%65%3B%74%65%78%74%2D%61%6C%69%67%6E%3A%63%65%6E%74%65%72%3B%63%6F%6C%6F%72%3A%23%61%61%61%7D%2E%73%75%6D%6D%61%72%79%20%68%33%7B%6D%61%72%67%69%6E%2D%74%6F%70%3A%30%3B%63%6F%6C%6F%72%3A%23%66%66%66%3B%66%6F%6E%74%2D%73%69%7A%65%3A%31%38%70%78%3B%64%69%73%70%6C%61%79%3A%66%6C%65%78%3B%67%61%70%3A%38%70%78%7D%2E%73%75%6D%6D%61%72%79%20%70%7B%6D%61%72%67%69%6E%3A%36%70%78%20%30%3B%66%6F%6E%74%2D%73%69%7A%65%3A%31%34%70%78%7D%2E%74%6F%74%61%6C%7B%63%6F%6C%6F%72%3A%23%66%66%66%3B%66%6F%6E%74%2D%77%65%69%67%68%74%3A%38%30%30%3B%66%6F%6E%74%2D%73%69%7A%65%3A%31%36%70%78%7D%2E%69%6E%73%74%72%75%63%74%69%6F%6E%73%7B%6D%61%72%67%69%6E%2D%74%6F%70%3A%32%30%70%78%3B%70%61%64%64%69%6E%67%3A%31%35%70%78%3B%62%61%63%6B%67%72%6F%75%6E%64%3A%76%61%72%28%2D%2D%69%6E%70%75%74%2D%62%67%29%3B%62%6F%72%64%65%72%2D%72%61%64%69%75%73%3A%31%30%70%78%3B%66%6F%6E%74%2D%73%69%7A%65%3A%31%34%70%78%3B%6C%69%6E%65%2D%68%65%69%67%68%74%3A%31%2E%37%3B%63%6F%6C%6F%72%3A%23%63%63%63%7D%2E%69%6E%73%74%72%75%63%74%69%6F%6E%73%20%68%34%7B%6D%61%72%67%69%6E%2D%74%6F%70%3A%30%3B%63%6F%6C%6F%72%3A%23%66%63%30%3B%66%6F%6E%74%2D%73%69%7A%65%3A%31%35%70%78%3B%64%69%73%70%6C%61%79%3A%66%6C%65%78%3B%61%6C%69%67%6E%2D%69%74%65%6D%73%3A%63%65%6E%74%65%72%3B%67%61%70%3A%38%70%78%7D%2E%69%6E%73%74%72%75%63%74%69%6F%6E%73%20%75%6C%7B%70%61%64%64%69%6E%67%2D%72%69%67%68%74%3A%31%38%70%78%7D%2E%69%6E%73%74%72%75%63%74%69%6F%6E%73%20%6C%69%7B%6D%61%72%67%69%6E%2D%62%6F%74%74%6F%6D%3A%38%70%78%7D%2E%72%65%71%75%69%72%65%64%2D%6E%6F%74%65%7B%63%6F%6C%6F%72%3A%23%66%66%64%65%64%65%3B%66%6F%6E%74%2D%73%69%7A%65%3A%31%33%70%78%3B%6D%61%72%67%69%6E%2D%74%6F%70%3A%36%70%78%7D%2E%73%6D%61%6C%6C%7B%66%6F%6E%74%2D%73%69%7A%65%3A%31%33%70%78%3B%63%6F%6C%6F%72%3A%23%61%61%61%7D%2E%63%6F%75%70%6F%6E%2D%61%72%65%61%7B%70%61%64%64%69%6E%67%3A%31%32%70%78%3B%62%61%63%6B%67%72%6F%75%6E%64%3A%23%30%66%30%66%31%32%3B%62%6F%72%64%65%72%2D%72%61%64%69%75%73%3A%31%30%70%78%7D%2E%77%61%72%6E%7B%62%61%63%6B%67%72%6F%75%6E%64%3A%23%33%62%30%61%30%61%3B%70%61%64%64%69%6E%67%3A%31%30%70%78%3B%62%6F%72%64%65%72%2D%72%61%64%69%75%73%3A%38%70%78%3B%63%6F%6C%6F%72%3A%23%66%66%64%65%64%65%7D%2E%64%65%62%75%67%7B%66%6F%6E%74%2D%73%69%7A%65%3A%31%32%70%78%3B%63%6F%6C%6F%72%3A%23%39%39%39%3B%6D%61%72%67%69%6E%2D%74%6F%70%3A%38%70%78%7D%2E%73%74%61%74%75%73%2D%62%61%64%67%65%7B%64%69%73%70%6C%61%79%3A%69%6E%6C%69%6E%65%2D%66%6C%65%78%3B%61%6C%69%67%6E%2D%69%74%65%6D%73%3A%63%65%6E%74%65%72%3B%67%61%70%3A%35%70%78%3B%70%61%64%64%69%6E%67%3A%35%70%78%20%31%30%70%78%3B%62%6F%72%64%65%72%2D%72%61%64%69%75%73%3A%32%30%70%78%3B%66%6F%6E%74%2D%73%69%7A%65%3A%31%32%70%78%3B%6D%61%72%67%69%6E%2D%62%6F%74%74%6F%6D%3A%31%30%70%78%7D%2E%73%74%61%74%75%73%2D%6F%6E%6C%69%6E%65%7B%62%61%63%6B%67%72%6F%75%6E%64%3A%72%67%62%61%28%30%2C%31%38%34%2C%30%2C%2E%32%29%3B%63%6F%6C%6F%72%3A%23%30%30%62%38%30%30%3B%62%6F%72%64%65%72%3A%31%70%78%20%73%6F%6C%69%64%20%23%30%30%62%38%30%30%7D%2E%73%74%61%74%75%73%2D%6F%66%66%6C%69%6E%65%7B%62%61%63%6B%67%72%6F%75%6E%64%3A%72%67%62%61%28%32%33%30%2C%30%2C%30%2C%2E%32%29%3B%63%6F%6C%6F%72%3A%23%65%36%30%30%30%30%3B%62%6F%72%64%65%72%3A%31%70%78%20%73%6F%6C%69%64%20%23%65%36%30%30%30%30%7D%2E%70%61%79%6D%65%6E%74%2D%73%74%61%74%75%73%7B%64%69%73%70%6C%61%79%3A%66%6C%65%78%3B%61%6C%69%67%6E%2D%69%74%65%6D%73%3A%63%65%6E%74%65%72%3B%6A%75%73%74%69%66%79%2D%63%6F%6E%74%65%6E%74%3A%73%70%61%63%65%2D%62%65%74%77%65%65%6E%3B%6D%61%72%67%69%6E%2D%62%6F%74%74%6F%6D%3A%31%35%70%78%7D%2E%73%74%65%70%2D%69%6E%64%69%63%61%74%6F%72%7B%64%69%73%70%6C%61%79%3A%66%6C%65%78%3B%6A%75%73%74%69%66%79%2D%63%6F%6E%74%65%6E%74%3A%73%70%61%63%65%2D%62%65%74%77%65%65%6E%3B%6D%61%72%67%69%6E%3A%32%30%70%78%20%30%3B%70%6F%73%69%74%69%6F%6E%3A%72%65%6C%61%74%69%76%65%7D%2E%73%74%65%70%2D%69%6E%64%69%63%61%74%6F%72%3A%3A%62%65%66%6F%72%65%7B%63%6F%6E%74%65%6E%74%3A%27%27%3B%70%6F%73%69%74%69%6F%6E%3A%61%62%73%6F%6C%75%74%65%3B%74%6F%70%3A%31%35%70%78%3B%72%69%67%68%74%3A%30%3B%6C%65%66%74%3A%30%3B%68%65%69%67%68%74%3A%32%70%78%3B%62%61%63%6B%67%72%6F%75%6E%64%3A%23%33%33%33%3B%7A%2D%69%6E%64%65%78%3A%31%7D%2E%73%74%65%70%7B%64%69%73%70%6C%61%79%3A%66%6C%65%78%3B%66%6C%65%78%2D%64%69%72%65%63%74%69%6F%6E%3A%63%6F%6C%75%6D%6E%3B%61%6C%69%67%6E%2D%69%74%65%6D%73%3A%63%65%6E%74%65%72%3B%70%6F%73%69%74%69%6F%6E%3A%72%65%6C%61%74%69%76%65%3B%7A%2D%69%6E%64%65%78%3A%32%7D%2E%73%74%65%70%2D%6E%75%6D%62%65%72%7B%77%69%64%74%68%3A%33%30%70%78%3B%68%65%69%67%68%74%3A%33%30%70%78%3B%62%6F%72%64%65%72%2D%72%61%64%69%75%73%3A%35%30%25%3B%62%61%63%6B%67%72%6F%75%6E%64%3A%23%33%33%33%3B%63%6F%6C%6F%72%3A%23%66%66%66%3B%64%69%73%70%6C%61%79%3A%66%6C%65%78%3B%61%6C%69%67%6E%2D%69%74%65%6D%73%3A%63%65%6E%74%65%72%3B%6A%75%73%74%69%66%79%2D%63%6F%6E%74%65%6E%74%3A%63%65%6E%74%65%72%3B%6D%61%72%67%69%6E%2D%62%6F%74%74%6F%6D%3A%35%70%78%3B%66%6F%6E%74%2D%73%69%7A%65%3A%31%34%70%78%7D%2E%73%74%65%70%2E%63%6F%6D%70%6C%65%74%65%64%20%2E%73%74%65%70%2D%6E%75%6D%62%65%72%7B%62%61%63%6B%67%72%6F%75%6E%64%3A%76%61%72%28%2D%2D%70%72%69%6D%61%72%79%2D%67%72%65%65%6E%29%7D%2E%73%74%65%70%2D%74%65%78%74%7B%66%6F%6E%74%2D%73%69%7A%65%3A%31%32%70%78%3B%63%6F%6C%6F%72%3A%23%61%61%61%3B%74%65%78%74%2D%61%6C%69%67%6E%3A%63%65%6E%74%65%72%7D%2E%73%74%65%70%2E%61%63%74%69%76%65%20%2E%73%74%65%70%2D%74%65%78%74%7B%63%6F%6C%6F%72%3A%23%66%66%66%7D%2E%73%75%63%63%65%73%73%2D%6D%65%73%73%61%67%65%7B%62%61%63%6B%67%72%6F%75%6E%64%3A%72%67%62%61%28%30%2C%31%38%34%2C%30%2C%2E%31%29%3B%62%6F%72%64%65%72%3A%31%70%78%20%73%6F%6C%69%64%20%76%61%72%28%2D%2D%70%72%69%6D%61%72%79%2D%67%72%65%65%6E%29%3B%62%6F%72%64%65%72%2D%72%61%64%69%75%73%3A%31%30%70%78%3B%70%61%64%64%69%6E%67%3A%31%35%70%78%3B%6D%61%72%67%69%6E%3A%31%35%70%78%20%30%3B%74%65%78%74%2D%61%6C%69%67%6E%3A%63%65%6E%74%65%72%3B%64%69%73%70%6C%61%79%3A%6E%6F%6E%65%7D%2E%73%75%63%63%65%73%73%2D%6D%65%73%73%61%67%65%20%69%7B%66%6F%6E%74%2D%73%69%7A%65%3A%34%30%70%78%3B%63%6F%6C%6F%72%3A%76%61%72%28%2D%2D%70%72%69%6D%61%72%79%2D%67%72%65%65%6E%29%3B%6D%61%72%67%69%6E%2D%62%6F%74%74%6F%6D%3A%31%30%70%78%7D%40%6D%65%64%69%61%20%28%6D%61%78%2D%77%69%64%74%68%3A%37%36%38%70%78%29%7B%2E%63%6F%6E%74%61%69%6E%65%72%7B%66%6C%65%78%2D%64%69%72%65%63%74%69%6F%6E%3A%63%6F%6C%75%6D%6E%7D%2E%73%69%64%65%62%61%72%7B%70%6F%73%69%74%69%6F%6E%3A%73%74%61%74%69%63%7D%2E%70%72%6F%64%75%63%74%7B%66%6C%65%78%2D%64%69%72%65%63%74%69%6F%6E%3A%63%6F%6C%75%6D%6E%3B%74%65%78%74%2D%61%6C%69%67%6E%3A%63%65%6E%74%65%72%7D%2E%73%74%65%70%2D%69%6E%64%69%63%61%74%6F%72%7B%66%6C%65%78%2D%77%72%61%70%3A%77%72%61%70%3B%67%61%70%3A%31%30%70%78%7D%7D%0A%20%20%3C%2F%73%74%79%6C%65%3E'));
//]]>
</script>
</head>
<body>

  <div class="header">
    <div class="logo">
      <i class="fas fa-shield-alt"></i>
      AIMHACK
    </div>
    <div>Ø§Ù„Ø¯ÙØ¹ â€” ÙÙˆØ¯Ø§ÙÙˆÙ† ÙƒØ§Ø´</div>
  </div>

  <div class="container">
    <div class="main" id="orderDetails"></div>
    <div class="sidebar summary" id="orderSummary"></div>
  </div>

  <!-- Firebase -->
  <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>

  <script>
    // Firebase Configuration
    const firebaseConfig = {
      apiKey: "AIzaSyAd5KNh5H6KaQ9nv8FP3keyFRh28zSwfLM",
      authDomain: "gama-xiter.firebaseapp.com",
      projectId: "gama-xiter",
      storageBucket: "gama-xiter.firebasestorage.app",
      messagingSenderId: "979348178199",
      appId: "1:979348178199:web:dd66b3d0d00b76fe61a352",
      measurementId: "G-4Q4P3GTJN5"
    };

    // Initialize Firebase
    firebase.initializeApp(firebaseConfig);
    const db = firebase.firestore();

    // Payment System Configuration
    let vodafoneNumber = "........"; // Default number
    const adminPhone = "201064061942";
    const discordWebhook = "https://discord.com/api/webhooks/1431376358885298246/P-iOcVfwm21GZQkFtYUPCEhu1od4vHwh8rilHv_JoWk_y8lIgCBWE05QezeZPCcIur30";
    const REPORT_ENDPOINT = '';
    const MAX_IMAGE_MB = 8;

    // Helper functions
    function sanitizeInput(v, max=600) { 
      if(v==null) return ''; 
      let s=String(v).replace(/[<>`"]/g,'').trim(); 
      return s.length>max? s.slice(0,max): s; 
    }
    
    function isImageFile(file) { 
      if(!file) return false; 
      const allowed=['image/jpeg','image/png','image/jpg']; 
      return allowed.includes(file.type); 
    }
    
    function sendReport(obj) { 
      if(!REPORT_ENDPOINT) return; 
      try { 
        const body=JSON.stringify(Object.assign({when:new Date().toISOString(), url: location.href, ua:navigator.userAgent}, obj)); 
        if(navigator.sendBeacon) navigator.sendBeacon(REPORT_ENDPOINT, body); 
        else fetch(REPORT_ENDPOINT,{method:'POST',headers:{'Content-Type':'application/json'},body,keepalive:true}).catch(()=>{}); 
      } catch(e){} 
    }

    // Firebase Listener for Vodafone Number Updates
    function setupPaymentListener() {
      console.log('ğŸ¯ Ø¨Ø¯Ø£ Ø§Ù„Ø§Ø³ØªÙ…Ø§Ø¹ Ù„ØªØ­Ø¯ÙŠØ«Ø§Øª ÙÙˆØ¯Ø§ÙÙˆÙ†...');
      
      db.collection('paymentNumbers').doc('current')
        .onSnapshot((doc) => {
          if (doc.exists) {
            const numbers = doc.data();
            console.log('ğŸ”„ ØªØ­Ø¯ÙŠØ« ÙÙŠ Ø±Ù‚Ù… ÙÙˆØ¯Ø§ÙÙˆÙ†:', numbers);
            
            // Update Vodafone number
            vodafoneNumber = numbers.vodafone || "01064061942";
            
            // Update UI
            const vodaNumElement = document.getElementById('vodaNum');
            if (vodaNumElement) {
              vodaNumElement.textContent = vodafoneNumber;
            }
            
            // Update last update time
            const lastUpdateElement = document.getElementById('lastUpdate');
            if (lastUpdateElement) {
              lastUpdateElement.textContent = new Date().toLocaleTimeString();
            }
            
            console.log('âœ… ØªÙ… ØªØ­Ø¯ÙŠØ« Ø±Ù‚Ù… Vodafone Ø¥Ù„Ù‰:', vodafoneNumber);
          } else {
            console.log('âš ï¸ Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¨ÙŠØ§Ù†Ø§Øª ÙÙŠ Firebase');
          }
        }, (error) => {
          console.error('âŒ Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø§Ø³ØªÙ…Ø§Ø¹ Ù„ØªØ­Ø¯ÙŠØ«Ø§Øª ÙÙˆØ¯Ø§ÙÙˆÙ†:', error);
        });
    }

    // Read URL parameters
    const params = new URLSearchParams(window.location.search);
    let cart = [];
    
    if(params.has("cart")){
      try { 
        cart = JSON.parse(decodeURIComponent(params.get("cart"))); 
      } catch(e){ 
        sendReport({ reason:'cart_parse_error', detail:String(e).slice(0,200) }); 
        cart = []; 
      }
    }
    
    const originalParam = params.has('original') ? Number(params.get('original')) : null;
    const totalParam = params.has('total') ? Number(params.get('total')) : null;
    
    // COUPON: accept whatever case; try URL first, then sessionStorage fallback
    let couponParamRaw = params.has('coupon') ? String(params.get('coupon')).trim() : '';
    let couponParam = couponParamRaw ? couponParamRaw.toUpperCase() : '';
    
    try {
      if(!couponParam){
        const stored = sessionStorage.getItem('applied_coupon');
        if(stored){
          const obj = JSON.parse(stored);
          if(obj && obj.key) couponParam = String(obj.key).toUpperCase();
        }
      }
    } catch(e){ /* ignore */ }

    const discountParam = params.has('discount') ? Number(params.get('discount')) : null;
    const discountValueParam = params.has('discount_value') ? params.get('discount_value') : null;
    const discountTypeParam = params.has('type') ? String(params.get('type')) : null;
    const checksumParam = params.has('checksum') ? String(params.get('checksum')) : null;

    // Coupon mapping
    const couponMap = {
      "R2": { label: "RX30", type: "percent", value: 30 },
      "R1": { label: "RX1", type: "percent", value: 20 },
      "R3": { label: "ODAY100", type: "percent", value: 30 }
    };

    // Resolve totals & coupon
    let originalPrice = (originalParam !== null) ? originalParam : 0;
    let afterPrice = (totalParam !== null) ? totalParam : originalPrice;
    let couponUsed = null;
    let discountAmount = (discountParam !== null) ? discountParam : 0;
    let discountValue = discountValueParam || '';
    let discountType = discountTypeParam || '';

    // If checkout passed a coupon code recognized, use it to compute missing fields
    if(couponParam && couponMap[couponParam]) {
      couponUsed = couponMap[couponParam];
      if(!discountType || discountAmount === 0 || afterPrice === originalPrice){
        if(couponUsed.type === 'percent'){
          discountType = 'percent';
          discountValue = couponUsed.value;
          discountAmount = Math.round(originalPrice * couponUsed.value / 100);
          afterPrice = Math.max(0, originalPrice - discountAmount);
        } else {
          discountType = 'flat';
          discountValue = couponUsed.value;
          discountAmount = Math.min(couponUsed.value, originalPrice);
          afterPrice = Math.max(0, originalPrice - discountAmount);
        }
      }
    } else {
      // if coupon not recognized but discount/after provided, compute fallback percent
      if((discountAmount === 0 || discountAmount === null) && originalPrice && typeof afterPrice === 'number'){
        discountAmount = Math.round(originalPrice - afterPrice);
        if(originalPrice) discountValue = Math.round(discountAmount / originalPrice * 100);
        discountType = 'percent';
      }
      if(couponParam) couponUsed = { label: couponParam.toUpperCase(), type: discountType || 'unknown', value: discountValue || '' };
    }

    // Calculate originalPrice from cart if not provided
    if (!originalPrice && Array.isArray(cart) && cart.length > 0) {
      originalPrice = cart.reduce((total, item) => {
        const price = Number(item.price || 0);
        const qty = Number(item.qty || 1);
        return total + (price * qty);
      }, 0);
      
      // Recalculate afterPrice if needed
      if (afterPrice === 0 || afterPrice === originalPrice) {
        afterPrice = originalPrice - discountAmount;
      }
    }

    // rounding safety
    originalPrice = Number((originalPrice||0).toFixed(2));
    afterPrice = Number((afterPrice||0).toFixed(2));
    discountAmount = Number((discountAmount||0).toFixed(2));

    // Calculate price per item after discount
    function calculateItemPriceAfterDiscount(itemPrice, itemQty) {
      if (discountAmount === 0 || originalPrice === 0) {
        return itemPrice * itemQty;
      }
      
      // Calculate the percentage this item contributes to the total
      const itemTotal = itemPrice * itemQty;
      const itemPercentage = itemTotal / originalPrice;
      
      // Apply the same percentage of discount to this item
      const itemDiscount = discountAmount * itemPercentage;
      return itemTotal - itemDiscount;
    }

    // Render UI
    const container = document.getElementById("orderDetails");
    
    if(!Array.isArray(cart) || cart.length === 0){
      container.innerHTML = "<div class='box'><p>âš ï¸ No products in cart.</p></div>";
    } else {
      let html = '';
      
      // Step indicator
      html += `
        <div class="box">
          <div class="step-indicator">
            <div class="step active">
              <div class="step-number">1</div>
              <div class="step-text">Ø£Ø¯Ø®Ù„ Ø¨ÙŠØ§Ù†Ø§ØªÙƒ</div>
            </div>
            <div class="step">
              <div class="step-number">2</div>
              <div class="step-text">Ø£Ø±Ø³Ù„ Ø§Ù„ØªØ­ÙˆÙŠÙ„</div>
            </div>
            <div class="step">
              <div class="step-number">3</div>
              <div class="step-text">Ø£Ø±ÙÙ‚ Ø§Ù„Ø³ÙƒØ±ÙŠÙ†</div>
            </div>
            <div class="step">
              <div class="step-number">4</div>
              <div class="step-text">ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø·Ù„Ø¨</div>
            </div>
          </div>
        </div>
      `;
      
      cart.forEach(item => {
        const img = sanitizeInput(item.img || 'placeholder.png');
        const title = sanitizeInput(item.name || item.title || 'Product');
        const price = Number(item.price || 0);
        const qty = Number(item.qty || 1);
        const itemTotal = price * qty;
        const itemAfterDiscount = calculateItemPriceAfterDiscount(price, qty);
        
        html += `
          <div class="box">
            <div class="product">
              <img src="${img}" alt="${title}">
              <div class="product-info">
                <h2>${title}</h2>
                ${discountAmount > 0 ? `
                  <p class="price">
                    <span class="price-old">${itemTotal.toFixed(2)} EGP</span>
                    ${itemAfterDiscount.toFixed(2)} EGP
                  </p>
                ` : `
                  <p class="price">${itemTotal.toFixed(2)} EGP</p>
                `}
                <p>Ø§Ù„ÙƒÙ…ÙŠØ©: ${qty}</p>
              </div>
            </div>
            <div class="payment-status">
              <div class="status-badge status-online">
                <i class="fas fa-wifi"></i>
                <span>Ù…ØªØµÙ„ - ÙŠØªÙ… Ø§Ù„ØªØ­Ø¯ÙŠØ« ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹</span>
              </div>
              <div class="small">Ø¢Ø®Ø± ØªØ­Ø¯ÙŠØ«: <span id="lastUpdate">${new Date().toLocaleTimeString()}</span></div>
            </div>
            <div class="pay-box">
              <i class="fas fa-mobile-alt" style="font-size: 24px; color: #e60000;"></i>
              <div>
                <strong>Ø­ÙˆÙ„ Ø¹Ù„ÙŠ Ø±Ù‚Ù… Ø¯Ù‡: <span id="vodaNum">${vodafoneNumber}</span></strong>
                <br>
                <button class="copy-btn" onclick="copyVoda()">
                  <i class="far fa-copy"></i> Ù†Ø³Ø® Ø§Ù„Ø±Ù‚Ù…
                </button>
              </div>
            </div>
          </div>
        `;
      });

      // coupon display
      const couponHtml = (couponUsed || couponParam) ? `
        <div class="form-group">
          <label>Ø§Ù„ÙƒÙˆØ¨ÙˆÙ† Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…</label>
          <input type="text" id="couponShow" value="${sanitizeInput((couponUsed && couponUsed.label? couponUsed.label : couponParam) + (discountType === 'percent' && discountValue ? ' (' + discountValue + '%)' : (discountType === 'flat' && discountValue ? ' (' + discountValue + ' EGP)' : '')))}" readonly>
        </div>
      ` : '';

      html += `
        <div class="box">
          <div class="form-group">
            <label><i class="fas fa-user"></i> Ø§Ø³Ù…Ùƒ Ø¨Ø§Ù„ÙƒØ§Ù…Ù„</label>
            <input type="text" id="custName" autocomplete="name" placeholder="Ù…Ø«Ø§Ù„: Ø£Ø­Ù…Ø¯ Ø¹Ù„ÙŠ">
          </div>
          <div class="form-group">
            <label><i class="fas fa-phone"></i> Ø±Ù‚Ù… ØªÙ„ÙÙˆÙ†Ùƒ (mobile)</label>
            <input type="text" id="custPhone" autocomplete="tel" placeholder="Ù…Ø«Ø§Ù„: 010xxxxxxxx">
          </div>
          <div class="form-group">
            <label><i class="fas fa-wallet"></i> Ø§Ù„Ø±Ù‚Ù… Ø§Ù„Ø­ÙˆÙ„Øª Ù…Ù†Ùˆ</label>
            <input type="text" id="vodaWallet" placeholder="Ù…Ø«Ø§Ù„: 01XXXXXXXXX">
          </div>
          <div class="form-group">
            <label><i class="fab fa-discord"></i> ÙŠÙˆØ²Ø± Ø§Ù„Ø¯ÙŠØ³ÙƒÙˆØ±Ø¯</label>
            <input type="text" id="custDiscord" placeholder="Ù…Ø«Ø§Ù„: user#1234">
          </div>
          <div class="form-group">
            <label><i class="fab fa-instagram"></i> ÙŠÙˆØ²Ø± Ø§Ù„Ø§Ù†Ø³ØªØ¬Ø±Ø§Ù…</label>
            <input type="text" id="custInstagram" placeholder="Ù…Ø«Ø§Ù„: @yourhandle">
          </div>
          ${couponHtml}
          <div class="form-group">
            <label><i class="fas fa-camera"></i> Ø³ÙƒØ±ÙŠÙ† Ø´ÙˆØª Ø§Ù„ØªØ­ÙˆÙŠÙ„ <span class="required-note">(Ù…Ø·Ù„ÙˆØ¨ - Ø£Ø±ÙÙ‚ ØµÙˆØ±Ø© ØªØ­ÙˆÙŠÙ„ ÙÙˆØ¯Ø§ÙÙˆÙ† ÙƒØ§Ø´)</span></label>
            <input type="file" id="paymentImg" accept="image/png, image/jpeg">
          </div>
          <button class="btn" id="confirmBtn">
            <i class="fas fa-check-circle"></i> ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø·Ù„Ø¨
          </button>
          <div class="loading" id="loading">
            <i class="fas fa-spinner fa-spin"></i> Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„...
          </div>
          <div class="success-message" id="successMessage">
            <i class="fas fa-check-circle"></i>
            <h3>ØªÙ… ØªØ£ÙƒÙŠØ¯ Ø·Ù„Ø¨Ùƒ Ø¨Ù†Ø¬Ø§Ø­!</h3>
            <p>Ø³ÙŠØªÙ… Ù…Ø±Ø§Ø¬Ø¹Ø© Ø·Ù„Ø¨Ùƒ ÙˆØ§Ù„ØªÙˆØ§ØµÙ„ Ù…Ø¹Ùƒ Ù‚Ø±ÙŠØ¨Ø§Ù‹</p>
          </div>
          <div id="statusMsg" style="margin-top:10px;font-size:14px;"></div>
          <div class="debug" id="debugArea"></div>
        </div>
      `;

      container.innerHTML = html;
    }

    // Render Sidebar
    function renderSidebar(){
      const couponLabel = couponUsed ? (couponUsed.label || couponParam) : (couponParam || 'Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø®ØµÙ…');
      const origStr = originalPrice ? `${originalPrice.toFixed(2)} EGP` : 'â€”';
      const afterStr = (typeof afterPrice === 'number') ? `${afterPrice.toFixed(2)} EGP` : 'â€”';
      const discountStr = discountType === 'percent' && discountValue ? `${discountValue}%` : (discountValue ? `${discountValue} EGP` : (discountAmount ? `${discountAmount} EGP` : 'â€”'));
      
      // Check if there's an actual discount
      const hasDiscount = discountAmount > 0 && originalPrice !== afterPrice;
      
      document.getElementById("orderSummary").innerHTML = `
        <h3><i class="fas fa-clipboard-list"></i> Ù…Ù„Ø®Øµ Ø§Ù„Ø·Ù„Ø¨</h3>
        <p><i class="fas fa-shopping-bag"></i> Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª: <strong>${Array.isArray(cart)?cart.length:0}</strong></p>
        <p><i class="fas fa-credit-card"></i> Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ø¯ÙØ¹: ÙÙˆØ¯Ø§ÙÙˆÙ† ÙƒØ§Ø´</p>
        
        ${hasDiscount ? `
          <p><i class="fas fa-receipt"></i> Ø§Ù„Ø³Ø¹Ø± Ø§Ù„Ø£ØµÙ„ÙŠ: <span class="price-old">${origStr}</span></p>
          <p><i class="fas fa-tag"></i> Ø§Ù„Ø®ØµÙ…: <strong>${sanitizeInput(discountStr)}</strong></p>
          <p class="total"><i class="fas fa-money-bill-wave"></i> Ø§Ù„Ù…Ø¨Ù„Øº Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ: ${afterStr}</p>
        ` : `
          <p class="total"><i class="fas fa-money-bill-wave"></i> Ø§Ù„Ù…Ø¨Ù„Øº Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ: ${afterStr}</p>
        `}
        
        <div class="coupon-area">
          <div style="font-weight:800;margin-bottom:6px"><i class="fas fa-tag"></i> Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„ÙƒÙˆØ¨ÙˆÙ†</div>
          <div class="small">Ø§Ù„ÙƒÙˆØ¨ÙˆÙ†: <strong>${sanitizeInput(couponLabel)}</strong></div>
          ${hasDiscount ? `
            <div style="margin-top:8px" class="small">Ø§Ù„Ø³Ø¹Ø± Ø§Ù„Ø£ØµÙ„ÙŠ: <span class="price-old">${origStr}</span></div>
            <div style="margin-top:8px" class="small">Ø¨Ø¹Ø¯ Ø§Ù„Ø®ØµÙ…: <strong>${afterStr}</strong></div>
            <div style="margin-top:8px" class="small">Ø§Ù„Ø®ØµÙ…: <strong>${sanitizeInput(discountStr)}</strong> (${discountAmount} Ø¬Ù†ÙŠÙ‡)</div>
          ` : `
            <div style="margin-top:8px" class="small">Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø®ØµÙ… Ù…Ø·Ø¨Ù‚</div>
          `}
        </div>
        <div class="instructions">
          <h4><i class="fas fa-exclamation-triangle"></i> ØªØ¹Ù„ÙŠÙ…Ø§Øª Ù‡Ø§Ù…Ø©:</h4>
          <ul>
            <li>ğŸ“‹ Ø§Ù†Ø³Ø® Ø±Ù‚Ù… ÙÙˆØ¯Ø§ÙÙˆÙ† ÙˆØ£Ø±Ø³Ù„ Ø§Ù„Ù…Ø¨Ù„Øº.</li>
            <li>ğŸ“¸ Ø§Ø±ÙØ¹ ØµÙˆØ±Ø© Ø¥Ø«Ø¨Ø§Øª Ø§Ù„ØªØ­ÙˆÙŠÙ„ (Ù…Ø·Ù„ÙˆØ¨).</li>
            <li>âœ… Ø§Ø¶ØºØ· Ø¹Ù„Ù‰ "ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø·Ù„Ø¨".</li>
            <li>â³ Ø§Ù†ØªØ¸Ø± Ø­ØªÙ‰ ÙŠØªÙ… Ø§Ù„ØªÙˆØ§ØµÙ„ Ù…Ø¹Ùƒ.</li>
          </ul>
        </div>
      `;
    }
    renderSidebar();

    // Copy Vodafone number
    function copyVoda(){ 
      const num = document.getElementById("vodaNum").textContent.trim(); 
      navigator.clipboard.writeText(num).then(()=>{ 
        alert("âœ… ØªÙ… Ù†Ø³Ø® Ø§Ù„Ø±Ù‚Ù…: " + num); 
      }); 
    }

    // Confirm order handler
    async function confirmOrderHandler(){
      try {
        const statusEl = document.getElementById('statusMsg');
        const debugEl = document.getElementById('debugArea');
        const successMsg = document.getElementById('successMessage');
        statusEl.textContent = '';
        debugEl.textContent = '';
        successMsg.style.display = 'none';

        const name = sanitizeInput(document.getElementById("custName")?.value || '');
        const phone = sanitizeInput(document.getElementById("custPhone")?.value || '');
        const wallet = sanitizeInput(document.getElementById("vodaWallet")?.value || '');
        const discordUser = sanitizeInput(document.getElementById("custDiscord")?.value || '');
        const instagram = sanitizeInput(document.getElementById("custInstagram")?.value || '');
        const imgInput = document.getElementById("paymentImg");
        const screenshot = imgInput && imgInput.files && imgInput.files[0] ? imgInput.files[0] : null;

        // validations
        if(!name || !phone || !wallet || !discordUser){
          alert("âš ï¸ ÙŠØ±Ø¬Ù‰ Ù…Ù„Ø¡ Ø§Ù„Ø§Ø³Ù…ØŒ Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙØŒ Ø±Ù‚Ù… Ø§Ù„Ù…Ø­ÙØ¸Ø© ÙˆØ§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ÙÙŠ Ø§Ù„Ø¯ÙŠØ³ÙƒÙˆØ±Ø¯.");
          return;
        }
        if(!screenshot){
          alert("âš ï¸ ÙŠØ±Ø¬Ù‰ Ø±ÙØ¹ ØµÙˆØ±Ø© Ø¥Ø«Ø¨Ø§Øª Ø§Ù„ØªØ­ÙˆÙŠÙ„ (Ù…Ø·Ù„ÙˆØ¨).");
          return;
        }
        if(!isImageFile(screenshot)){ 
          alert("âŒ Ù†ÙˆØ¹ Ø§Ù„Ù…Ù„Ù ØºÙŠØ± Ù…Ø¯Ø¹ÙˆÙ…. ÙŠØ±Ø¬Ù‰ Ø§Ø³ØªØ®Ø¯Ø§Ù… PNG Ø£Ùˆ JPG."); 
          return; 
        }
        if(screenshot.size > MAX_IMAGE_MB * 1024 * 1024){ 
          alert("âŒ Ø­Ø¬Ù… Ø§Ù„ØµÙˆØ±Ø© ÙƒØ¨ÙŠØ± Ø¬Ø¯Ø§Ù‹. Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£Ù‚ØµÙ‰ " + MAX_IMAGE_MB + "MB."); 
          return; 
        }

        document.getElementById("loading").style.display = "block";
        const confirmBtnEl = document.getElementById("confirmBtn");
        if(confirmBtnEl) confirmBtnEl.disabled = true;

        // prepare products text
        let productsText = "";
        if(Array.isArray(cart) && cart.length){
          cart.forEach(p => { 
            const price = Number(p.price||0);
            const qty = Number(p.qty||1);
            const itemTotal = price * qty;
            const itemAfterDiscount = calculateItemPriceAfterDiscount(price, qty);
            
            productsText += `â€¢ ${sanitizeInput(p.name || p.title || 'product')} â€” ${itemAfterDiscount.toFixed(2)} EGP (x${qty})\n`; 
          });
        } else productsText = "No items";

        // coupon strings
        const couponLabel = couponUsed ? (couponUsed.label || couponParam) : (couponParam ? couponParam : 'No coupon');
        const discountStr = (discountType === 'percent' && discountValue) ? `${discountValue}% OFF` : (discountValue ? `${discountValue} EGP off` : (discountAmount ? `${discountAmount} EGP off` : 'â€”'));
        const originalStr = originalPrice ? `${originalPrice.toFixed(2)} EGP` : 'â€”';
        const afterStr = (typeof afterPrice === 'number') ? `${afterPrice.toFixed(2)} EGP` : 'â€”';
        const now = new Date().toLocaleString('ar-EG', { timeZone: 'Africa/Cairo' });

        // Prepare WhatsApp text
        const waPlain =
`ğŸ’³ Ø·Ù„Ø¨ Ø¬Ø¯ÙŠØ¯ â€” AIMHACK
ğŸ‘¤ Ø§Ù„Ø§Ø³Ù…: ${name}
ğŸ“± Ø§Ù„Ù‡Ø§ØªÙ: ${phone}
ğŸ’³ Ù…Ø­ÙØ¸Ø© ÙÙˆØ¯Ø§ÙÙˆÙ†: ${wallet}
ğŸ® Ø§Ù„Ø¯ÙŠØ³ÙƒÙˆØ±Ø¯: ${discordUser}
ğŸ“¸ Ø§Ù„Ø§Ù†Ø³ØªØ¬Ø±Ø§Ù…: ${instagram || 'Ù„Ø§ ÙŠÙˆØ¬Ø¯'}
ğŸŸï¸ Ø§Ù„ÙƒÙˆØ¨ÙˆÙ†: ${couponLabel} â€” ${discountType === 'percent' ? discountValue + '% OFF' : (discountAmount ? discountAmount + ' EGP off' : 'â€”')}
ğŸ’° Ø§Ù„Ø³Ø¹Ø± Ø§Ù„Ø£ØµÙ„ÙŠ: ${originalStr}
ğŸ”» Ø§Ù„Ø®ØµÙ…: ${discountAmount} EGP
ğŸ’µ Ø§Ù„Ø³Ø¹Ø± Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ: ${afterStr}
ğŸ“¦ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª:
${productsText}
ğŸ•’ Ø§Ù„ÙˆÙ‚Øª (Ø§Ù„Ù‚Ø§Ù‡Ø±Ø©): ${now}
ğŸ“ ØªÙ… Ø¥Ø±Ø³Ø§Ù„ ØµÙˆØ±Ø© Ø§Ù„ØªØ­ÙˆÙŠÙ„ Ø¥Ù„Ù‰ Ø§Ù„Ø¯ÙŠØ³ÙƒÙˆØ±Ø¯.`;

        const waText = encodeURIComponent(waPlain);
        const waUrl = `https://wa.me/${adminPhone}?text=${waText}`;

        // Open WhatsApp window
        let waWindow = null;
        try {
          waWindow = window.open('about:blank', '_blank');
        } catch(e){
          waWindow = null;
        }

        // Send to Discord webhook
        let discordOk = false;
        let discordStatus = null;
        try {
          const filename = (screenshot && screenshot.name) ? screenshot.name.replace(/[^\w\.\-]/g,'_').slice(0,120) : 'transfer.jpg';
          const embed = {
            title: "ğŸ’³ Ø·Ù„Ø¨ Ø¬Ø¯ÙŠØ¯ â€” AIMHACK",
            color: 16711680,
            description: "ØªÙ… Ø§Ø³ØªÙ„Ø§Ù… Ø·Ù„Ø¨ Ø¹Ø¨Ø± ÙÙˆØ¯Ø§ÙÙˆÙ† ÙƒØ§Ø´",
            fields: [
              { name: "Ø§Ù„Ø§Ø³Ù…", value: name || "â€”", inline: false },
              { name: "Ø§Ù„Ù‡Ø§ØªÙ", value: phone || "â€”", inline: false },
              { name: "Ù…Ø­ÙØ¸Ø© ÙÙˆØ¯Ø§ÙÙˆÙ†", value: wallet || "â€”", inline: false },
              { name: "Ø§Ù„Ø¯ÙŠØ³ÙƒÙˆØ±Ø¯", value: discordUser || "â€”", inline: false },
              { name: "Ø§Ù„Ø§Ù†Ø³ØªØ¬Ø±Ø§Ù…", value: instagram || "â€”", inline: false },
              { name: "Ø§Ù„ÙƒÙˆØ¨ÙˆÙ†", value: `${couponLabel} â€” ${discountType === 'percent' ? discountValue + '% OFF' : (discountAmount ? discountAmount + ' EGP off' : 'â€”')}`, inline: false },
              { name: "Ø§Ù„Ø³Ø¹Ø± Ø§Ù„Ø£ØµÙ„ÙŠ", value: originalStr, inline: false },
              { name: "Ø§Ù„Ø®ØµÙ… (EGP)", value: `${discountAmount}`, inline: false },
              { name: "Ø§Ù„Ø³Ø¹Ø± Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ", value: afterStr, inline: false },
              { name: "Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª", value: productsText || "â€”", inline: false },
              { name: "Ø§Ù„ÙˆÙ‚Øª (Ø§Ù„Ù‚Ø§Ù‡Ø±Ø©)", value: now, inline: false },
              { name: "ØµÙˆØ±Ø© Ø§Ù„ØªØ­ÙˆÙŠÙ„", value: `Ù…Ø±ÙÙ‚: ${filename}`, inline: false }
            ],
            image: { url: `attachment://${filename}` }
          };

          const form = new FormData();
          form.append('payload_json', JSON.stringify({ username: 'AIMHACK BOT', embeds: [embed] }));
          form.append('file', screenshot, filename);

          const resp = await fetch(discordWebhook, { method: 'POST', body: form });
          discordStatus = resp.status;
          if(resp.ok) {
            discordOk = true;
            console.log('Discord webhook send OK', resp.status);
          } else {
            console.warn('Discord responded with', resp.status);
            sendReport({ reason:'discord_send_http_error', status: resp.status });
          }
        } catch(e){
          console.error('Discord webhook send failed', e);
          sendReport({ reason:'discord_send_error', detail: String(e).slice(0,200) });
        }

        // Open WhatsApp after Discord attempt
        if(waWindow){
          try {
            waWindow.location = waUrl;
          } catch(e){
            window.open(waUrl, '_blank');
          }
        } else {
          window.open(waUrl, '_blank');
        }

        // Success UI
        document.getElementById("loading").style.display = "none";
        successMsg.style.display = "block";
        if(confirmBtnEl) confirmBtnEl.disabled = false;

        // Debug info
        debugEl.textContent = `âœ… ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø·Ù„Ø¨ Ø¥Ù„Ù‰ Ø§Ù„Ø¯ÙŠØ³ÙƒÙˆØ±Ø¯ (${discordStatus})${discordOk?' âœ…':' âš ï¸'} â€” ØªÙ… ÙØªØ­ ÙˆØ§ØªØ³Ø§Ø¨.`;

        // Report
        sendReport({ 
          event:'payment_submitted', 
          name_len:name.length, 
          phone_len:phone.length, 
          discord_len:discordUser.length, 
          instagram_len:instagram.length, 
          coupon:couponLabel, 
          products_count:Array.isArray(cart)?cart.length:0, 
          discord_ok:discordOk, 
          discord_status:discordStatus 
        });

      } catch(e){
        console.error('Order submission error', e);
        document.getElementById("loading").style.display = "none";
        document.getElementById("statusMsg").textContent = "âŒ Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„. Ø­Ø§ÙˆÙ„ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰.";
        const confirmBtnEl = document.getElementById("confirmBtn");
        if(confirmBtnEl) confirmBtnEl.disabled = false;
        sendReport({ reason:'order_submit_error', detail: String(e).slice(0,200) });
      }
    }

    // Attach event listener
    document.addEventListener('DOMContentLoaded', function() {
      const confirmBtn = document.getElementById("confirmBtn");
      if(confirmBtn) {
        confirmBtn.addEventListener("click", confirmOrderHandler);
      }
      
      // Setup Firebase listener
      setupPaymentListener();
    });

  </script>
</body>

</html>
